schema: '2.0'
stages:
  transfer_to_sql_and_unificate_data:
    cmd: python3 ../stage_runner.py --job transfer_to_sql_and_unificate_data
    deps:
    - path: ../crawler/divar_data_collection/apartment_tehran.csv
      md5: b5dc656d08fc1a4f13f3fd3bcc7b6757
      size: 308358
    - path: ../crawler/divar_data_collection/house_tehran.csv
      md5: 7ef1accbbfbe5ef76e742aeeb6d77352
      size: 218537
    - path: ../src/collect_data/collect_data.py
      md5: 2f0ff16cb4c305ea2bdfee42b56ba6d7
      size: 909
    params:
      params.yaml:
        transfer_to_sql_and_unificate_data:
          csv_path_list:
          - ../crawler/divar_data_collection/house_tehran.csv
          - ../crawler/divar_data_collection/apartment_tehran.csv
          file_directory: data/raw/
    outs:
    - path: data/raw/
      md5: 22fc188acda883dac6f0135cab125579.dir
      size: 526901
      nfiles: 1
  split_data:
    cmd: python3 ../stage_runner.py --job split_data
    deps:
    - path: ../src/collect_data/split_data.py
      md5: 7e9e20b05ffd630dd132d7facce34d90
      size: 1309
    - path: data/raw/
      md5: 22fc188acda883dac6f0135cab125579.dir
      size: 526901
      nfiles: 1
    params:
      params.yaml:
        split_data:
          file_path: data/raw/posts.csv
          train_test_dir: data/train_test/
    outs:
    - path: data/train_test/
      md5: 8df9538df000824c3113e80ed25929dc.dir
      size: 517367
      nfiles: 6
  manual_feature_eng:
    cmd: python3 ../stage_runner.py --job manual_feature_eng
    deps:
    - path: ../src/feature_eng/manual_features.py
      md5: 7dee538d3b4f58969a6931e8ea054a1c
      size: 1480
    - path: data/train_test/
      md5: 8df9538df000824c3113e80ed25929dc.dir
      size: 517367
      nfiles: 6
    params:
      params.yaml:
        manual_feature_eng:
          train_test_dir: data/train_test/
          out_dir: data/train_test_manual/
    outs:
    - path: data/train_test_manual/
      md5: f8be6943c60a1063f447d0edc8b3d883.dir
      size: 497006
      nfiles: 3
  tf_idf_eng:
    cmd: python3 ../stage_runner.py --job tf_idf_eng
    deps:
    - path: ../src/feature_eng/tfidf_features.py
      md5: 41e6c5a02c1f7991e7ecad486c5bdcbc
      size: 937
    - path: data/train_test_manual/
      md5: f8be6943c60a1063f447d0edc8b3d883.dir
      size: 497006
      nfiles: 3
    params:
      params.yaml:
        tf_idf_eng:
          train_test_inp_dir: data/train_test_manual/
          out_dir: data/train_test_tf_idf/
          min_df: 5
    outs:
    - path: data/train_test_tf_idf/
      md5: 848a708dfcc9b25b5d7ea00565a18767.dir
      size: 7769325
      nfiles: 3
